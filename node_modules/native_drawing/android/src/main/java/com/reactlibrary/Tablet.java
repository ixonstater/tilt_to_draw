package com.reactlibrary;

import android.view.SurfaceView;
import android.view.SurfaceHolder;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Color;
import android.content.Context;

public class Tablet extends SurfaceView{
  private SurfaceHolder holder;
  private Paint paint;
  private SimpleFloatVector pts;

  public Tablet(Context context){
    super(context);
    this.paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    this.paint.setColor(Color.RED);
    this.paint.setStrokeWidth(20);
    this.holder = getHolder();
    this.pts = new SimpleFloatVector(8000);
    this.pts.add(this.getWidth() / (float)2);
    this.pts.add(this.getHeight() / (float)2);
  }

  public void draw(float x, float y){
    Canvas canvas = this.holder.lockCanvas();
    if(canvas != null){
      this.pts.add(x);
      this.pts.add(y);
      canvas.drawLines(this.pts.getArr(), this.paint);
      holder.unlockCanvasAndPost(canvas);
      this.pts.add(x);
      this.pts.add(y);
    }
  }
}

class SimpleFloatVector{
  private float[] arr;
  private int originalCapacity;
  private int capacity;
  private int size = 0;

  public SimpleFloatVector(int capacity){
    this.capacity = capacity;
    this.originalCapacity = capacity;
    this.arr = new float[this.capacity];
  }

  public void add(float val){
    if(size == capacity){
      grow();
    }
    this.arr[size] = val;
    this.size++;
  }

  public float[] getArr(){
    return this.arr;
  }

  public void clearArr(){
    this.arr = new float[this.originalCapacity];
  }

  private void grow(){
    this.capacity *= 2;
    float[] temp = new float[this.capacity];
    for (int i = 0; i <= this.size - 1; i++){
      temp[i] = this.arr[i];
    }
  }
}