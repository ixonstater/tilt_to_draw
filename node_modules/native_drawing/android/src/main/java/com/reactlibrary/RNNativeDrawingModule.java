  
package com.reactlibrary;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReadableArray;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.Callback;
import android.util.Log;
import react.debuglogmanager.Logger;
import com.reactlibrary.Tablet;
import com.reactlibrary.ReactViewManager;
import java.lang.Runnable;
import java.lang.Thread;

public class RNNativeDrawingModule extends ReactContextBaseJavaModule {

  private final ReactApplicationContext reactContext;
  private ReactViewManager bridge;
  private Tablet tablet;

  public RNNativeDrawingModule(ReactApplicationContext reactContext, ReactViewManager bridge) {
    super(reactContext);
    this.reactContext = reactContext;
    this.bridge = bridge;
  }

  @Override
  public String getName() {
    return "RNNativeDrawing";
  }

  @ReactMethod
  public void startDraw(){
    Tablet tablet = this.bridge.getTablet();
    if(tablet == null){
      throw new NullPointerException("DebugSym -> startDraw() tablet is null"); 
    } else{
      this.tablet = tablet;
      this.tablet.enterDrawLoop();
    }
  }

  @ReactMethod
  public void sendCoords(ReadableArray coords){
    this.tablet.pts.add((float)coords.getDouble(0));
    this.tablet.pts.add((float)coords.getDouble(1));
  }
}
